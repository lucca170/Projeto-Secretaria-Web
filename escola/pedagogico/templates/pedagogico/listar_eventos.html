{% extends 'base/base.html' %} {% block content %}
<div class="container">
    <h1>Eventos Extracurriculares</h1>
    <p>Inscreva-se nas palestras, workshops e atividades esportivas.</p>

    <div class="eventos-lista">
        {% for evento in eventos %}
            <div class="evento-card" style="border: 1px solid #ccc; padding: 15px; margin-bottom: 15px; border-radius: 5px;">
                <h3>{{ evento.nome }}</h3>
                <p><strong>Data:</strong> {{ evento.data|date:"d/m/Y" }}</p>
                <p>{{ evento.descricao }}</p>
                
                {% with num_participantes=evento.participantes.count %}
                    <p>
                        <strong>Vagas:</strong> 
                        {{ num_participantes }} / {{ evento.vagas }}
                    </p>
                {% endwith %}

                <form action="{% url 'inscrever_evento' evento.id %}" method="POST">
                    {% csrf_token %}
                    
                    {% if evento.id in eventos_inscritos_ids %}
                        <button type="submit" style="background-color: #dc3545; color: white; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer;">
                            Cancelar Inscrição
                        </button>
                    {% else %}
                        <button type="submit" style="background-color: #28a745; color: white; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer;">
                            Inscrever-se
                        </button>
                    {% endif %}
                </form>
            </div>
        {% empty %}
            <p>Nenhum evento extracurricular disponível no momento.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}